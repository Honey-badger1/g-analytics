(this["webpackJsonpgithub-analytics"]=this["webpackJsonpgithub-analytics"]||[]).push([[0],{103:function(e,t,n){e.exports=n(219)},108:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},215:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(49),l=n.n(c),o=(n(108),n(25)),s=n.n(o),i=n(54),u=n(19),d=n(31),m=n(28),p=n(33),f=n(32),h=n(17),g=n(221),b=n(220),v=n(223),E=function(e){return r.a.createElement("input",Object.assign({},e.input,{type:e.type,placeholder:e.placeholder}))},O=r.a.createContext(),w=r.a.createContext(),y=function(){return function(e){return function(t){return r.a.createElement(O.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{GitService:n}))}))}}},j=n(11);n(113);var k=function(e){var t=e.data;return r.a.createElement("div",{draw:function(){var e=25,n=20,a=20,r=140,c=600-r-n,l=200-e-a,o=j.d().range([l,0]).padding(.1),s=j.e().range([0,c]),i=j.g(".second").append("svg").attr("width",c+r+n).attr("height",l+e+a).append("g").attr("transform","translate("+r+","+e+")");t.forEach((function(e){e.series=+e.series})),s.domain([0,j.c(t,(function(e){return e.series}))]),o.domain(t.map((function(e){return e.label}))),i.selectAll(".bars").data(t).enter().append("rect").attr("class","bars").attr("width",(function(e){return s(e.series)})).attr("y",(function(e){return o(e.label)})).attr("height",o.bandwidth()),i.append("g").attr("transform","translate(0,"+l+")").call(j.a(s)),i.append("g").call(j.b(o))}()})},S=(n(114),function(e){var t=e.item,n=e.allChanges,a=t.sha,c=(t.date,t.deletions),l=t.name,o=t.additions,s=t.filename,i=t.changes,u=a.split(",").length,m=s.flat(),p=i.flat(),f=o.flat(),h=c.flat(),g=m.map((function(e,t){return[e,p[t],f[t],h[t]]}));g.map((function(e){return function(e){switch(!0){case e[0].endsWith(".js"):e[0]="JAVASCRIPT";break;case e[0].endsWith(".css"):e[0]="CSS";break;case e[0].endsWith(".html"):e[0]="HTML";break;case e[0].endsWith(".java"):e[0]="JAVA";break;case e[0].endsWith(".py"):e[0]="PYTHON";break;case e[0].endsWith(".php"):e[0]="PHP";break;case e[0].endsWith(".sql"):e[0]="SQL";break;case e[0].endsWith(".ruby"):e[0]="RUBY";break;case e[0].endsWith(".net"):e[0]=".NET";break;case e[0].endsWith(".c"):e[0]="C++";break;case e[0].endsWith("lock.json"):e[0]="LOCK";break;case e[0].endsWith(".json"):e[0]="JSON";break;case e[0].endsWith(".sass"):e[0]="SASS";break;case e[0].endsWith(".bson"):e[0]="MONGO";break;case e[0].endsWith(".csv"):e[0]="CSV";break;case e[0].endsWith(".txt"):e[0]="TEXT";break;default:e[0]="OTHER"}}(e)})),console.log(g);var b=g.map((function(e){var t=Object(d.a)(e,4);return{stack:t[0],val:t[1],added:t[2],deleted:t[3]}})).reduce((function(e,t){var n=e.find((function(e){return e.stack===t.stack}));return n?(n.val+=t.val,n.added+=t.added,n.deleted+=t.deleted):e.push(t),e}),[]),v=b.reduce((function(e,t){return e+t.val}),0),E=b.reduce((function(e,t){return e+t.added}),0),O=b.reduce((function(e,t){return e+t.deleted}),0);console.log(b),console.log(v);for(var w=b.map((function(e){var t=e.stack,n=e.val;return{stack:t,val:n=(n/v*100).toFixed(2)}})),y=[],j=[w.map((function(e){return e.stack})),l].flat(),S=[w.map((function(e){return e.val})),(v/n*100).toFixed(2)].flat(),L=0;L<j.length;L++)y[L]={label:j[L],series:parseFloat(S[L])};return console.log(y),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,l),r.a.createElement("td",null,E),r.a.createElement("td",null,O),r.a.createElement("td",null,u),r.a.createElement("td",null,r.a.createElement("ul",null,w.map((function(e){return r.a.createElement("li",null,e.stack,":",e.val,"%; ")}))))),r.a.createElement(k,{data:y}))});var L=function(e){var t=e.data;return r.a.createElement("div",{className:"chartContainer"},r.a.createElement("svg",{className:"chart",draw:function(){for(var e=20*t.series.length,n=[],a=0;a<t.labels.length;a++)for(var r=0;r<t.series.length;r++)n.push(t.series[r].values[a]);var c=j.f().range(["#16A085","#33435C"]),l=20*n.length+10*t.labels.length,o=j.e().domain([0,j.c(n)]).range([0,400]),s=j.e().range([l+10,0]),i=j.b().scale(s).tickFormat("").tickSize(0),u=j.a(o).tickFormat((function(e){return e})),d=j.g(".chart").attr("width",700).attr("height",l+30),m=d.selectAll("g").data(n).enter().append("g").attr("transform",(function(e,n){return"translate(150,"+(20*n+10*(.5+Math.floor(n/t.series.length)))+")"}));m.append("rect").attr("fill",(function(e,n){return c(n%t.series.length)})).attr("class","bar").attr("width",o).attr("height",19),m.append("text").attr("class","label").attr("x",(function(e){return-150})).attr("y",e/2).attr("dy",".35em").text((function(e,n){return n%t.series.length===0?t.labels[Math.floor(n/t.series.length)]:""})),d.append("g").attr("class","y axis").attr("transform","translate(150, -5)").call(i),d.append("g").attr("class","x axis").attr("transform","translate(150,"+l+")").call(u);var p=d.selectAll(".legend").data(t.series).enter().append("g").attr("transform",(function(e,t){return"translate(572,"+(22*t- -5)+")"}));p.append("rect").attr("width",18).attr("height",18).style("fill",(function(e,t){return c(t)})).style("stroke",(function(e,t){return c(t)})),p.append("text").attr("class","legend").attr("x",22).attr("y",14).text((function(e){return e.label}))}()}))},C=(n(115),function(){return r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-spin"},r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null))))}),x=(n(116),function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.owner!==this.props.owner||e.repo!==this.props.repo){var n=this.props,a=n.GitService,r=n.owner,c=n.repo,l=document.querySelector(".chart");l&&(l.innerHTML="");var o=document.querySelector(".second");o&&(o.innerHTML=""),console.log(r,c),c&&r&&(this.props.dataRequested(),a.getUser(r,c).then((function(e){return e.map((function(e){return e.sha}))})).then((function(e){return e.map((function(e){return a.getCommitInfo(r,c,e)}))})).then((function(e){return Promise.all(e)})).then((function(e){return e.map((function(e){var t=e.commit.author,n=t.name,a=(t.email,t.date),r=e.sha,c=e.stats,l=(c.total,c.additionsCommon,c.deletionsCommon,e.files.filter((function(e){if("package-lock.json"!==e.filename&&!e.filename.endsWith(".txt")&&!e.filename.endsWith(".csv"))return e}))),o=l.map((function(e){return e.filename})),s=l.map((function(e){return e.changes}));return{sha:r,name:n,date:a,filename:o,additions:l.map((function(e){return e.additions})),changes:s,deletions:l.map((function(e){return e.deletions}))}}))})).then((function(e){return e.reduce((function(e,t){var n=e.find((function(e){return e.name===t.name}));return n?(n.changes.push(t.changes),n.deletions.push(t.deletions),n.additions.push(t.additions),n.sha+=","+t.sha,n.date+=t.date,n.filename.push(t.filename)):e.push(t),e}),[])})).then((function(e){return t.props.commitsLoaded(e)})))}}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.owner,a=e.repo;if(e.loading)return r.a.createElement(C,null);if(console.log(t),!n||!a)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Stats "));var c={},l=t.map((function(e){return e.additions.flat().reduce((function(e,t){return e+t}))})),o=t.map((function(e){return e.deletions.flat().reduce((function(e,t){return e+t}))}));console.log(l),c.labels=t.map((function(e){return e.name})),c.series=[],c.series.push({label:"additions",values:l}),c.series.push({label:"deletions",values:o}),console.log(c);var s=t.map((function(e){return e.changes.flat().reduce((function(e,t){return e+t}))}));return s.length>0&&(s=s.reduce((function(e,t){return e+t}))),console.log(s),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Stats"),r.a.createElement("div",{className:"first"},r.a.createElement("table",{className:"tableStats"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rows added"),r.a.createElement("th",null,"Rows Deleted"),r.a.createElement("th",null,"Commits"),r.a.createElement("th",null,"Stack Used in Commits")),t.map((function(e){return r.a.createElement(S,{key:e.sha,item:e,allChanges:s})}))),r.a.createElement(L,{className:"commonChart",data:c})),r.a.createElement("div",{className:"second"}))}}]),n}(a.Component)),N={commitsLoaded:function(e){return{type:"COMMITS_LOADED",payload:e}},dataRequested:function(){return{type:"DATA_REQUESTED"}}},_=y()(Object(h.b)((function(e){return{items:e.commitsReducer.commits,owner:e.commitsReducer.owner,repo:e.commitsReducer.repo}}),N)(x)),I=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.owner,a=e.repo,c=e.reset,l=e.formValues;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:t((function(e){return e}))},r.a.createElement("label",{htmlFor:"owner"},"Owner"),r.a.createElement(g.a,{id:"owner",name:"owner",component:E,type:"text"}),r.a.createElement("label",{htmlFor:"repo"},"Repository"),r.a.createElement(g.a,{id:"repo",name:"repo",component:E,type:"text"}),r.a.createElement("button",{type:"submit",onClick:function(){l({owner:n,repo:a})}},"Submit"),r.a.createElement("button",{type:"reset",onClick:c},"Reset")),r.a.createElement(_,null))}}]),n}(a.Component);I=Object(b.a)({form:"selectingFormValues"})(I);var R={formValues:function(e){return{type:"FORM_VALUES",payload:{owner:e.owner,repo:e.repo}}}},A=Object(v.a)("selectingFormValues"),W=I=Object(h.b)((function(e){return{owner:A(e,"owner"),repo:A(e,"repo")}}),R)(I),T=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null))},F=n(8),M=n(7);function D(){var e=Object(a.useContext)(w),t=e.state,n=e.dispatch,c=Object(a.useState)({errorMessage:"",isLoading:!1}),l=Object(d.a)(c,2),o=l[0],s=l[1],i=t.client_id,u=t.redirect_uri;return Object(a.useEffect)((function(){var e=window.location.href;if(e.includes("?code=")){var a=e.split("?code=");window.history.pushState({},null,a[0]),s(Object(F.a)(Object(F.a)({},o),{},{isLoading:!0}));var r={client_id:t.client_id,redirect_uri:t.redirect_uri,client_secret:t.client_secret,code:a[1]},c=t.proxy_url;fetch(c,{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){n({type:"LOGIN",payload:{user:e,isLoggedIn:!0}})})).catch((function(e){s({isLoading:!1,errorMessage:"Sorry! Login failed"})}))}}),[t,n,o]),t.isLoggedIn?r.a.createElement(M.a,{to:"/"}):r.a.createElement("section",{className:"container"},r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome"),r.a.createElement("span",null,"Super amazing app"),r.a.createElement("span",null,o.errorMessage),r.a.createElement("div",{className:"login-container"},o.isLoading?r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{className:"login-link",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat(i,"&redirect_uri=").concat(u),onClick:function(){s(Object(F.a)(Object(F.a)({},o),{},{errorMessage:""}))}},r.a.createElement("span",null,"Login with GitHub"))))))}function U(){var e=Object(a.useContext)(w),t=e.state,n=e.dispatch;if(!t.isLoggedIn)return r.a.createElement(M.a,{to:"/login"});var c=t.user,l=c.avatar_url,o=c.name,s=c.public_repos,i=c.followers,u=c.following;return r.a.createElement("div",{className:"container"},r.a.createElement("button",{onClick:function(){n({type:"LOGOUT"})}},"Logout"),r.a.createElement("div",null,r.a.createElement("div",{className:"content"},r.a.createElement("img",{src:l,alt:"Avatar"}),r.a.createElement("span",null,o),r.a.createElement("span",null,s," Repos"),r.a.createElement("span",null,i," Followers"),r.a.createElement("span",null,u," Following"))))}var J={isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||null,client_id:"d69e0bb782f42a72f006",redirect_uri:"http://localhost:3000/login",client_secret:"41cc2f3b0577259e37ed945ad0a6de19e23a456c",proxy_url:"http://localhost:5000/authenticate"},V=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("isLoggedIn",JSON.stringify(t.payload.isLoggedIn)),localStorage.setItem("user",JSON.stringify(t.payload.user)),console.log(t.payload.isLoggedIn),Object(F.a)(Object(F.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn,user:t.payload.user});case"LOGOUT":return localStorage.clear(),Object(F.a)(Object(F.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}},G=(n(215),n(50));var H=function(){var e=Object(a.useReducer)(V,J),t=Object(d.a)(e,2),n=t[0],c=t[1];return r.a.createElement(w.Provider,{value:{state:n,dispatch:c}},r.a.createElement(G.a,null,r.a.createElement(M.d,null,r.a.createElement(M.b,{path:"/login",exact:!0,component:D}),r.a.createElement(M.b,{path:"/",exact:!0,component:U}),r.a.createElement(M.b,{path:"/repo",exact:!0,component:T}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=function(){return r.a.createElement("div",{className:"error"},"Error")},q=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return Object(m.a)(n,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?r.a.createElement(P,null):this.props.children}}]),n}(a.Component),B=n(6),z=n(100),Q=n(101),Y=n(222),K={commits:[],owner:"",repo:"",loading:!0,show:"false"},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COMMITS_LOADED":return Object(F.a)(Object(F.a)({},e),{},{commits:t.payload,loading:!1});case"FORM_VALUES":return Object(F.a)(Object(F.a)({},e),{},{owner:t.payload.owner,repo:t.payload.repo});case"CLEAR_DATA":return Object(F.a)(Object(F.a)({},e),{},{commits:[],owner:"",repo:""});case"DATA_REQUSTED":return Object(F.a)(Object(F.a)({},e),{},{commits:e.commits,loading:!0});case"SHOW_CONT":return Object(F.a)(Object(F.a)({},e),{},{show:!0});default:return e}},$=B.c({form:Y.a,commitsReducer:X}),Z=Object(Q.createLogger)(),ee=Object(B.d)($,Object(B.a)(z.a,Z));n(216).config();var te=new function e(){var t=this;Object(u.a)(this,e),this._apiBase="https://api.github.com",this.getResource=function(){var e=Object(i.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n)+", received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getUser=function(){var e=Object(i.a)(s.a.mark((function e(n,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/repos/".concat(n,"/").concat(a,"/commits"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getCommitInfo=function(){var e=Object(i.a)(s.a.mark((function e(n,a,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/repos/".concat(n,"/").concat(a,"/commits/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()};l.a.render(r.a.createElement(h.a,{store:ee},r.a.createElement(q,null,r.a.createElement(O.Provider,{value:te},r.a.createElement(H,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.121b4af4.chunk.js.map