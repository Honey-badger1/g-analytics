(this["webpackJsonpgithub-analytics"]=this["webpackJsonpgithub-analytics"]||[]).push([[0],{104:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},210:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(47),l=n.n(c),o=(n(104),n(29)),s=n.n(o),i=n(49),u=n(18),m=n(21),d=n(24),f=n(23),p=n(19),h=n(214),v=n(213),b=n(216),E=function(){return{type:"CLEAR_DATA"}},g=function(e){return r.a.createElement("input",Object.assign({},e.input,{type:e.type,placeholder:e.placeholder}))},w=r.a.createContext(),O=function(){return function(e){return function(t){return r.a.createElement(w.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{GitService:n}))}))}}},k=n(97),y=n(9);n(109);var j=function(e){var t=e.data;return r.a.createElement("div",{draw:function(){var e=25,n=20,a=20,r=140,c=600-r-n,l=200-e-a,o=y.d().range([l,0]).padding(.1),s=y.e().range([0,c]),i=y.g(".second").append("svg").attr("width",c+r+n).attr("height",l+e+a).append("g").attr("transform","translate("+r+","+e+")");t.forEach((function(e){e.series=+e.series})),s.domain([0,y.c(t,(function(e){return e.series}))]),o.domain(t.map((function(e){return e.label}))),i.selectAll(".bars").data(t).enter().append("rect").attr("class","bars").attr("width",(function(e){return s(e.series)})).attr("y",(function(e){return o(e.label)})).attr("height",o.bandwidth()),i.append("g").attr("transform","translate(0,"+l+")").call(y.a(s)),i.append("g").call(y.b(o))}()})},C=(n(110),function(e){var t=e.item,n=e.allChanges,a=t.sha,c=(t.date,t.deletions),l=t.name,o=t.additions,s=t.filename,i=t.changes,u=a.split(",").length,m=s.flat(),d=i.flat(),f=o.flat(),p=c.flat(),h=m.map((function(e,t){return[e,d[t],f[t],p[t]]}));h.map((function(e){return function(e){switch(!0){case e[0].endsWith(".js"):e[0]="JAVASCRIPT";break;case e[0].endsWith(".css"):e[0]="CSS";break;case e[0].endsWith(".html"):e[0]="HTML";break;case e[0].endsWith(".java"):e[0]="JAVA";break;case e[0].endsWith(".py"):e[0]="PYTHON";break;case e[0].endsWith(".php"):e[0]="PHP";break;case e[0].endsWith(".sql"):e[0]="SQL";break;case e[0].endsWith(".ruby"):e[0]="RUBY";break;case e[0].endsWith(".net"):e[0]=".NET";break;case e[0].endsWith(".c"):e[0]="C++";break;case e[0].endsWith("lock.json"):e[0]="LOCK";break;case e[0].endsWith(".json"):e[0]="JSON";break;case e[0].endsWith(".sass"):e[0]="SASS";break;case e[0].endsWith(".bson"):e[0]="MONGO";break;case e[0].endsWith(".csv"):e[0]="CSV";break;case e[0].endsWith(".txt"):e[0]="TEXT";break;default:e[0]="OTHER"}}(e)})),console.log(h);var v=h.map((function(e){var t=Object(k.a)(e,4);return{stack:t[0],val:t[1],added:t[2],deleted:t[3]}})).reduce((function(e,t){var n=e.find((function(e){return e.stack===t.stack}));return n?(n.val+=t.val,n.added+=t.added,n.deleted+=t.deleted):e.push(t),e}),[]),b=v.reduce((function(e,t){return e+t.val}),0),E=v.reduce((function(e,t){return e+t.added}),0),g=v.reduce((function(e,t){return e+t.deleted}),0);console.log(v),console.log(b);for(var w=v.map((function(e){var t=e.stack,n=e.val;return{stack:t,val:n=(n/b*100).toFixed(2)}})),O=[],y=[w.map((function(e){return e.stack})),l].flat(),C=[w.map((function(e){return e.val})),(b/n*100).toFixed(2)].flat(),S=0;S<y.length;S++)O[S]={label:y[S],series:parseFloat(C[S])};return console.log(O),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,l),r.a.createElement("td",null,E),r.a.createElement("td",null,g),r.a.createElement("td",null,u),r.a.createElement("td",null,r.a.createElement("ul",null,w.map((function(e){return r.a.createElement("li",null,e.stack,":",e.val,"%; ")}))))),r.a.createElement(j,{data:O}))});var S=function(e){var t=e.data;return r.a.createElement("div",{className:"chartContainer"},r.a.createElement("svg",{className:"chart",draw:function(){for(var e=20*t.series.length,n=[],a=0;a<t.labels.length;a++)for(var r=0;r<t.series.length;r++)n.push(t.series[r].values[a]);var c=y.f().range(["#16A085","#33435C"]),l=20*n.length+10*t.labels.length,o=y.e().domain([0,y.c(n)]).range([0,400]),s=y.e().range([l+10,0]),i=y.b().scale(s).tickFormat("").tickSize(0),u=y.a(o).tickFormat((function(e){return e})),m=y.g(".chart").attr("width",700).attr("height",l+30),d=m.selectAll("g").data(n).enter().append("g").attr("transform",(function(e,n){return"translate(150,"+(20*n+10*(.5+Math.floor(n/t.series.length)))+")"}));d.append("rect").attr("fill",(function(e,n){return c(n%t.series.length)})).attr("class","bar").attr("width",o).attr("height",19),d.append("text").attr("class","label").attr("x",(function(e){return-150})).attr("y",e/2).attr("dy",".35em").text((function(e,n){return n%t.series.length===0?t.labels[Math.floor(n/t.series.length)]:""})),m.append("g").attr("class","y axis").attr("transform","translate(150, -5)").call(i),m.append("g").attr("class","x axis").attr("transform","translate(150,"+l+")").call(u);var f=m.selectAll(".legend").data(t.series).enter().append("g").attr("transform",(function(e,t){return"translate(572,"+(22*t- -5)+")"}));f.append("rect").attr("width",18).attr("height",18).style("fill",(function(e,t){return c(t)})).style("stroke",(function(e,t){return c(t)})),f.append("text").attr("class","legend").attr("x",22).attr("y",14).text((function(e){return e.label}))}()}))},x=(n(111),function(){return r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-spin"},r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null)),r.a.createElement("div",null,r.a.createElement("div",null))))}),A=(n(112),function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.owner!==this.props.owner||e.repo!==this.props.repo){var n=this.props,a=n.GitService,r=n.owner,c=n.repo,l=document.querySelector(".chart");l&&(l.innerHTML="");var o=document.querySelector(".second");o&&(o.innerHTML=""),console.log(r,c),c&&r&&(this.props.dataRequested(),a.getUser(r,c).then((function(e){return e.map((function(e){return e.sha}))})).then((function(e){return e.map((function(e){return a.getCommitInfo(r,c,e)}))})).then((function(e){return Promise.all(e)})).then((function(e){return e.map((function(e){var t=e.commit.author,n=t.name,a=(t.email,t.date),r=e.sha,c=e.stats,l=(c.total,c.additionsCommon,c.deletionsCommon,e.files.filter((function(e){if("package-lock.json"!==e.filename&&!e.filename.endsWith(".txt")&&!e.filename.endsWith(".csv"))return e}))),o=l.map((function(e){return e.filename})),s=l.map((function(e){return e.changes}));return{sha:r,name:n,date:a,filename:o,additions:l.map((function(e){return e.additions})),changes:s,deletions:l.map((function(e){return e.deletions}))}}))})).then((function(e){return e.reduce((function(e,t){var n=e.find((function(e){return e.name===t.name}));return n?(n.changes.push(t.changes),n.deletions.push(t.deletions),n.additions.push(t.additions),n.sha+=","+t.sha,n.date+=t.date,n.filename.push(t.filename)):e.push(t),e}),[])})).then((function(e){return t.props.commitsLoaded(e)})))}}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.owner,a=e.repo;if(e.loading)return r.a.createElement(x,null);if(console.log(t),!n||!a)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Stats "));var c={},l=t.map((function(e){return e.additions.flat().reduce((function(e,t){return e+t}))})),o=t.map((function(e){return e.deletions.flat().reduce((function(e,t){return e+t}))}));console.log(l),c.labels=t.map((function(e){return e.name})),c.series=[],c.series.push({label:"additions",values:l}),c.series.push({label:"deletions",values:o}),console.log(c);var s=t.map((function(e){return e.changes.flat().reduce((function(e,t){return e+t}))}));return s.length>0&&(s=s.reduce((function(e,t){return e+t}))),console.log(s),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Stats"),r.a.createElement("div",{className:"first"},r.a.createElement("table",{className:"tableStats"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rows added"),r.a.createElement("th",null,"Rows Deleted"),r.a.createElement("th",null,"Commits"),r.a.createElement("th",null,"Stack Used in Commits")),t.map((function(e){return r.a.createElement(C,{key:e.sha,item:e,allChanges:s})}))),r.a.createElement(S,{className:"commonChart",data:c})),r.a.createElement("div",{className:"second"}))}}]),n}(a.Component)),R={commitsLoaded:function(e){return{type:"COMMITS_LOADED",payload:e}},clearNewData:E,dataRequested:function(){return{type:"DATA_REQUESTED"}}},W=O()(Object(p.b)((function(e){return{items:e.commitsReducer.commits,owner:e.commitsReducer.owner,repo:e.commitsReducer.repo}}),R)(A)),T=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.owner,a=e.repo,c=e.reset,l=e.formValues;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:t((function(e){return e}))},r.a.createElement("label",{htmlFor:"owner"},"Owner"),r.a.createElement(h.a,{id:"owner",name:"owner",component:g,type:"text"}),r.a.createElement("label",{htmlFor:"repo"},"Repository"),r.a.createElement(h.a,{id:"repo",name:"repo",component:g,type:"text"}),r.a.createElement("button",{type:"submit",onClick:function(){l({owner:n,repo:a})}},"Submit"),r.a.createElement("button",{type:"reset",onClick:c},"Reset")),r.a.createElement(W,null))}}]),n}(a.Component);T=Object(v.a)({form:"selectingFormValues"})(T);var F={formValues:function(e){return{type:"FORM_VALUES",payload:{owner:e.owner,repo:e.repo}}},clearNewData:E},N=Object(b.a)("selectingFormValues"),D=T=Object(p.b)((function(e){return{owner:N(e,"owner"),repo:N(e,"repo")}}),F)(T),L=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null))},M=(n(210),n(6)),_=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.c,null,r.a.createElement(M.a,{path:"/",exact:!0,component:L})))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=function(){return r.a.createElement("div",{className:"error"},"Error")},V=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return Object(m.a)(n,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?r.a.createElement(U,null):this.props.children}}]),n}(a.Component),H=n(67),I=n(7),P=n(15),q=n(215),B={commits:[],owner:"",repo:"",loading:!0,show:"false"},J=I.b({commitsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COMMITS_LOADED":return Object(P.a)(Object(P.a)({},e),{},{commits:t.payload,loading:!1});case"FORM_VALUES":return Object(P.a)(Object(P.a)({},e),{},{owner:t.payload.owner,repo:t.payload.repo});case"CLEAR_DATA":return Object(P.a)(Object(P.a)({},e),{},{commits:[],owner:"",repo:""});case"DATA_REQUSTED":return Object(P.a)(Object(P.a)({},e),{},{commits:e.commits,loading:!0});case"SHOW_CONT":return Object(P.a)(Object(P.a)({},e),{},{show:!0});default:return e}},form:q.a}),G=Object(I.c)(J),Q=new function e(){var t=this;Object(u.a)(this,e),this._apiBase="https://api.github.com",this.getResource=function(){var e=Object(i.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n)+", received ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getUser=function(){var e=Object(i.a)(s.a.mark((function e(n,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/repos/".concat(n,"/").concat(a,"/commits"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getCommitInfo=function(){var e=Object(i.a)(s.a.mark((function e(n,a,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/repos/".concat(n,"/").concat(a,"/commits/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()};l.a.render(r.a.createElement(p.a,{store:G},r.a.createElement(V,null,r.a.createElement(w.Provider,{value:Q},r.a.createElement(H.a,null,r.a.createElement(_,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(212)}},[[99,1,2]]]);
//# sourceMappingURL=main.eab48b4e.chunk.js.map